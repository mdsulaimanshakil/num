#include <bits/stdc++.h>
using namespace std;

double rootMeanSquareError(const vector<double>& y, const vector<double>& yhat) {
    if (y.size() != yhat.size() || y.empty()) return NAN;
    double s = 0.0;
    for (size_t i = 0; i < y.size(); ++i) {
        double d = y[i] - yhat[i];
        s += d * d;
    }
    return sqrt(s / y.size());
}

int main() {
    // sample data
    vector<double> x = {0, 1, 2, 3, 4};
    vector<double> y = {1.0, 2.9, 5.1, 7.2, 9.1};

    int n = (int)x.size();
    double sumX = 0, sumY = 0, sumX2 = 0, sumXY = 0;
    for (int i = 0; i < n; ++i) {
        sumX += x[i];
        sumY += y[i];
        sumX2 += x[i] * x[i];
        sumXY += x[i] * y[i];
    }

    double denom = n * sumX2 - sumX * sumX;
    if (fabs(denom) < 1e-15) {
        cerr << "Singular data for linear fit\n";
        return 1;
    }

    double b = (n * sumXY - sumX * sumY) / denom;
    double a = (sumY - b * sumX) / n;

    vector<double> yhat(n);
    for (int i = 0; i < n; ++i) yhat[i] = a + b * x[i];

    cout << "Linear fit y = a + b x\n";
    cout << "a = " << a << "\n";
    cout << "b = " << b << "\n";
    cout << "RMSE = " << rootMeanSquareError(y, yhat) << "\n";
    return 0;
}
